apiVersion: admissionregistration.k8s.io/v1beta1
kind: ValidatingWebhookConfiguration
metadata:
  name: lockvalidation-cfg 
  labels:
    app: lockvalidation 
webhooks:
  - name: lockvalidation.kotas.tech 
    clientConfig:
      service:
        name: lockvalidation-svc
        namespace: default
        path: "/validate"
      caBundle: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUQyRENDQXNDZ0F3SUJBZ0lVSU53Y0hiWDJyYU9TZ0sxYzRpeGJ2TGw1ZDk4d0RRWUpLb1pJaHZjTkFRRUwKQlFBd0ZURVRNQkVHQTFVRUF4TUtiV2x1YVd0MVltVkRRVEFlRncweE9UQXlNakV4TXpJMU1EQmFGdzB5TURBeQpNakV4TXpJMU1EQmFNQ2t4SnpBbEJnTlZCQU1USG14dlkydDJZV3hwWkdGMGFXOXVMWE4yWXk1a1pXWmhkV3gwCkxuTjJZekNDQVNJd0RRWUpLb1pJaHZjTkFRRUJCUUFEZ2dFUEFEQ0NBUW9DZ2dFQkFQbE5aQnUyN29sQnRMeDYKOFNweS9TSWxhWUtubUY5b0RrbXZuWi9ZVXl5VThMVFk0NElkK2d2Zzk5OUJaU2ZJV0REUmkvaDh4TmlhQlhmegpTY091U2tEeFVML09Rcml6Q1pDSGJlWDh1QVl4VG9SOFJGMStDbHpIenlnaGE1UHB5dmYwRWJ0ODBsSHlvNmlpCitLRVVoaFh5MnJMd2RrWmp6V0tKK1NPMVhEbUVaMzN6WkJ0ckJFQjNySlBudDFxU3lJV2Z6anJTaVdvNngzUlMKa3gxdkdxem01SjlYWEFGU3RQd0xYM05vUjhwcXNLVHN4cjdLN0pQNlU3QVlXZTZmQ2pvaHBnYjhERGU0VUdWWgpQRnljam9ITlplWld1ellVWUZ4RDQySW4wcGgyMnFnUmo1Z2RiOXJ2Sk9VTGFQQUV1V0M3WDIrSjJVNFp0NmUvCk1tVkk5RHNDQXdFQUFhT0NBUW93Z2dFR01BNEdBMVVkRHdFQi93UUVBd0lGb0RBVEJnTlZIU1VFRERBS0JnZ3IKQmdFRkJRY0RBVEFNQmdOVkhSTUJBZjhFQWpBQU1CMEdBMVVkRGdRV0JCUStHVElJRlNockFHaXp6eVVmUTBWVgppUlpDRkRDQnNRWURWUjBSQklHcE1JR21naEpzYjJOcmRtRnNhV1JoZEdsdmJpMXpkbU9DR214dlkydDJZV3hwClpHRjBhVzl1TFhOMll5NWtaV1poZFd4MGdoNXNiMk5yZG1Gc2FXUmhkR2x2YmkxemRtTXVaR1ZtWVhWc2RDNXoKZG1PQ0pteHZZMnQyWVd4cFpHRjBhVzl1TFhOMll5NWtaV1poZFd4MExuTjJZeTVqYkhWemRHVnlnaXhzYjJOcgpkbUZzYVdSaGRHbHZiaTF6ZG1NdVpHVm1ZWFZzZEM1emRtTXVZMngxYzNSbGNpNXNiMk5oYkRBTkJna3Foa2lHCjl3MEJBUXNGQUFPQ0FRRUFjMjAvcnJQbzdtUy9xdzVDT1l0WUdRVUpPZkdQMkdjTjA4UjJ5MGlLQ2cvcDFLcDAKZFRmQzNhNmhJSVRTbHZ2TDNaTk5XcHV1SXlPQm5xQTZJdEtLUFpveGYvL1dmVFF2a0FRTzdlRi8zTUFXR1dDcAo3SXE4SWFXTXB4bEYzRGJNOXU3NjNtMUNBUFZZMUpTaTd5WVk2ak5nTlE0TjBqQUVlWlVLMDZ1aTU3RGZyUUNBCjJKRFBnQURqTGJaTStxaWxQSnV1N2lWQTBHcjVFOEJKUzdXRXNXZHBjeFZVaHJNQlVvRUVidVNYSWx2dHVEOTQKbnpLNlRaTExxelZMZ01uN2g4em5WWkVZMGpKd00xZk9ieFZHU2pqUjVBV2dWL1gweGdWVGx0SkdJbWdnQjhkawo2TDd0Q2laZVc1aElOSVNPL0crVEd4djcxWW9GdGdWVDhNR2ltdz09Ci0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0K
    rules:
      - operations: 
          - UPDATE
          - DELETE
        apiGroups:
          - ""
        apiVersions: 
          - v1
        resources: 
          - "pods"
    namespaceSelector:
      matchLabels:
        controlled: "true"
